/*! Minified JavaScript created in Discovery 17.07.2017. 2018-02-02 */
$(function(){var a=$("#staffViewOfOtherUserDOs"),b="View delivery options presented to other users",c="Hide delivery options presented to other users";a.find("> div").length&&(a.hide(),$link=$("<a>",{href:"#",text:b,"class":"discoveryPrimaryCallToActionLink",click:function(d){a.slideToggle(),$link.text()===b?$link.text(c):$link.text(b),d.preventDefault()}}).appendTo($("#staffViewOfOtherUserDOsWrapper")));var d=$("#imageViewerLink"),e=$("#imageViewerApp"),f="Show images",g="Hide images";isBootstrapped=!1,d.text(f),$(".image-info").hide(),d.on("click touchstart",function(a){$(".image-info").toggle();d.attr("data-iaid")||0,d.attr("data-thumbServiceUrl")||"";return d.text()===f?(isBootstrapped?e.show():(isBootstrapped=!0,angular.module("imageViewerApp"),e.show(),angular.bootstrap(document.getElementById("imageViewerApp"),["imageViewerApp"])),void d.text(g)):(d.text(f),e.hide(),Modernizr.hashchange?void 0:void a.preventDefault())}),function(){$details=$("#name-authority .asset-details"),$details.hide();var a=$("<button>",{text:"View details of this record creator","class":"call-to-action-link",click:function(){$details.is(":visible")?$(this).text("View details of this record creator"):$(this).text("Hide details of this record creator"),$details.toggle()}}).css({"float":"right"});$details.after(a)}()}),$(document).ready(function(){$supplemental=$(".supplemental-content"),$expander=$(".expander-link"),$supplemental.hide(),$expander.on("click",function(a){a.preventDefault(),$(this).toggleClass("expanded"),$supplemental.toggle()})});var showAll='<p class="center"><a id="show-all">Show all matches</a></p>',numItems=$(".ttt-item").length;$(document).ready(function(){$(".ttt-item").hide(),$(".ttt-item:lt(3)").show(),numItems>3&&$("#traces-through-time-collection").append(showAll),$("#show-all").on("click",function(){$(".ttt-item").show(),$(this).hide()})}),$(document).ready(function(){var a=function(a){a.attr("aria-expanded",function(a,b){return"true"==b?"false":"true"})};$("#suggest-a-correction-form").hide(),$("#show-suggestion-form").on("click",function(b){a($(this)),b.preventDefault(),1==$("#suggest-a-correction-form").length&&($("#suggest-a-correction-form").toggle(),$("#fieldContainingError").focus(),a($("#suggest-a-correction-form")))})}),$(document).ready(function(){var a=function(){$("#hierarchy button").on("click",function(){$(window).width()<=768&&($("#hierarchy ul > li").slideToggle("fast"),$(this).toggleClass("upToggle"),$("#hierarchy nav > a").toggleClass("openFolder"))})},b=function(){$("#imageViewerLink").on("click",function(a){a.preventDefault()})},c=function(){$("#invite-feedback").next(".emphasis-block"),$("#imageViewerApp").length,document.querySelector("#tag-delete-success-message");if($("#add-tag-list .emphasis-block","#reportTagCompletionMessage").is(":visible")){var a=document.getElementById("user-contributions");a.scrollIntoView(!0)}if($(".emphasis-block").before($("#invite-feedback")).is(":visible")){var b=document.getElementById("invite-feedback");b.scrollIntoView(!0)}};a(),b(),c()}),function(a){a.fn.flag_tagging=function(b){return this.each(function(){var b=a(this),c=a("#report-tag",b),d=a(".general-tag-list-item",b),e=function(a){a.attr("aria-expanded",function(a,b){return"true"==b?"false":"true"})};d.on("click",".flagTagLink",function(f){e(a(this)),e(c),f.preventDefault();var g=a(f.delegateTarget),h=a(f.target),i=h.data("tagid"),j=a(".tagName",g).text(),k=a(".tagToBeRemoved",b),l=a("#tagId",b);$hiddenFieldValue=a("#tagValue",b),d.removeClass("selected-for-flagging"),g.addClass("selected-for-flagging"),k.text(j),l.val(i),$hiddenFieldValue.val(j),c.show()}),a("input[type=reset]",b).on("click",function(b){e(c),e(a(".flagTagLink")),b.preventDefault(),c.hide(),d.removeClass("selected-for-flagging")})})}}(jQuery),function(a){a.fn.confirmDeleteFlag=function(){return this.on("click",function(){return confirm("Are you sure you want to delete this tag?")})}}(jQuery),$("#user-contributions").flag_tagging(),$("a.deleteTag").confirmDeleteFlag(),function(a){a.fn.discoveryExploreSurvey=function(b){a.extend({},a.fn.discoveryExploreSurvey.defaults,b);return this.each(function(){var b=a(this),c=function(b){b.find("form").slideUp();a("<p>",{text:"Thank you for your feedback."}).hide().appendTo(b).fadeIn()},d=function(a){b.find("#initial-question").hide(),b.find("#reasons-for-dissatisfaction").fadeIn(),b.find("input[type=checkbox]").first().focus()},e=function(a){a.find("#reasons-for-dissatisfaction").hide()},f=function(){i("Nothing to improve")},g=function(){i("Something to improve")},h=function(){var b=[];a("#did-not-understand").prop("checked")&&b.push("Did not understand"),a("#too-much-information").prop("checked")&&b.push("Too much information"),a("#expected-the-record").prop("checked")&&b.push("Expected the record"),a("#access-the-record").prop("checked")&&b.push("Did not understand how to access the record"),a("#did-not-know-was-tna").prop("checked")&&b.push("Did not know I was looking at TNA website"),a("#other").prop("checked")&&b.push("Other"),a("#explore-comments").val()&&b.push("Comments:"+a("#explore-comments").val()),b.forEach(function(a){i(a)})},i=function(a){dataLayer.push({event:"Discovery",eventCategory:"Discovery",eventAction:"Feedback",eventLabel:a})},j=function(){a("#reasons-for-dissatisfaction").attr("aria-expanded",function(a,b){return"true"==b?"false":"true"})};e(a(this)),b.on("change click",function(e){var h=a(e.target);switch(!0){case"room-for-improvement-no"===h.attr("id"):c(b),f();break;case"room-for-improvement-yes"===h.attr("id"):d(b),g(),j()}}),b.on("submit",function(a){a.preventDefault(),c(b),h(),j()}),a('#reasons-for-dissatisfaction [type="reset"]').on("click",function(){a("#reasons-for-dissatisfaction").hide(),a("#initial-question").show(),j()})})}}(jQuery),$("#discovery-explore-survey").discoveryExploreSurvey();